Below is a single, selfâ€‘contained code block that you can copy and paste directly into your terminal. This block combines all the necessary commands to set up your clean project (using your starting commands), create a .env.local file with your Supabase configuration, generate the required directories and files (with full code), and finally instruct you on how to run the app.

If your terminal hangs at any heredoc prompt, simply type `EOF` on a new line and press Enter to complete that section.

```bash
# 1. Create the project and reset it (your starting commands)
npx create-expo-app ScriptHammer
cd ScriptHammer
npm run reset-project
rm -rf app-example

# 2. Create a .env.local file for environment variables
cat > .env.local << 'EOF'
SUPABASE_URL=https://your-supabase-url.supabase.co
SUPABASE_ANON_KEY=your-anon-key
EOF

# 3. Create app.config.js to load .env.local values into Expo's extra field
cat > app.config.js << 'EOF'
import 'dotenv/config';

export default {
  expo: {
    name: 'ScriptHammer',
    slug: 'ScriptHammer',
    version: '1.0.0',
    extra: {
      supabaseUrl: process.env.SUPABASE_URL,
      supabaseAnonKey: process.env.SUPABASE_ANON_KEY,
    },
  },
};
EOF

# 4. Create the required directory structure
mkdir -p app lib

# 5. Create the Supabase client file
cat > lib/supabaseClient.ts << 'EOF'
import AsyncStorage from '@react-native-async-storage/async-storage';
import { createClient } from '@supabase/supabase-js';
import Constants from 'expo-constants';

const SUPABASE_URL: string = Constants.manifest?.extra?.supabaseUrl;
const SUPABASE_ANON_KEY: string = Constants.manifest?.extra?.supabaseAnonKey;

export const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
  localStorage: AsyncStorage as any,
});
EOF

# 6. Create the global layout & authentication provider
cat > app/_layout.tsx << 'EOF'
import React, { useState, useEffect, createContext, useContext, ReactNode } from 'react';
import { View, ActivityIndicator, StatusBar } from 'react-native';
import { Stack } from 'expo-router';
import { TailwindProvider } from 'nativewind';
import { supabase } from '../lib/supabaseClient';

interface AuthContextType {
  user: any;
  role: string | null;
}

const AuthContext = createContext<AuthContextType>({ user: null, role: null });

export const useAuth = () => useContext(AuthContext);

interface AuthProviderProps {
  children: ReactNode;
}

const AuthProvider = ({ children }: AuthProviderProps) => {
  const [user, setUser] = useState<any>(null);
  const [role, setRole] = useState<string | null>(null);
  const [loading, setLoading] = useState<boolean>(true);

  const fetchUserRole = async (user: any) => {
    try {
      const { data, error } = await supabase
        .from('profiles')
        .select('role')
        .eq('id', user.id)
        .single();
      if (error) {
        console.error('Error fetching role:', error);
      } else {
        setRole(data.role);
      }
    } catch (error) {
      console.error('Error in fetchUserRole:', error);
    }
  };

  useEffect(() => {
    const session = supabase.auth.session();
    setUser(session?.user ?? null);
    if (session?.user) {
      fetchUserRole(session.user);
    }
    const { data: authListener } = supabase.auth.onAuthStateChange((event, session) => {
      setUser(session?.user ?? null);
      if (session?.user) {
        fetchUserRole(session.user);
      } else {
        setRole(null);
      }
    });
    setLoading(false);
    return () => {
      authListener.unsubscribe();
    };
  }, []);

  if (loading) {
    return (
      <View className="flex-1 justify-center items-center">
        <ActivityIndicator size="large" />
      </View>
    );
  }

  return (
    <AuthContext.Provider value={{ user, role }}>
      {children}
    </AuthContext.Provider>
  );
};

export default function RootLayout() {
  return (
    <TailwindProvider>
      <AuthProvider>
        <StatusBar barStyle="default" />
        <Stack />
      </AuthProvider>
    </TailwindProvider>
  );
}
EOF

# 7. Create the authentication screen
cat > app/auth.tsx << 'EOF'
import React, { useState } from 'react';
import { View, Text, TextInput, TouchableOpacity, Alert } from 'react-native';
import { useRouter } from 'expo-router';
import { supabase } from '../lib/supabaseClient';

const AuthScreen = () => {
  const [email, setEmail] = useState<string>('');
  const [password, setPassword] = useState<string>('');
  const [loading, setLoading] = useState<boolean>(false);
  const router = useRouter();

  const handleSignUp = async () => {
    setLoading(true);
    const { data: signUpData, error } = await supabase.auth.signUp({
      email,
      password,
    });

    if (error) {
      Alert.alert('Error', error.message);
      setLoading(false);
      return;
    }

    const { count, error: countError } = await supabase
      .from('profiles')
      .select('id', { count: 'exact', head: true });

    if (countError) {
      Alert.alert('Error', countError.message);
      setLoading(false);
      return;
    }

    const role = count === 0 ? 'admin' : 'user';

    const { error: profileError } = await supabase
      .from('profiles')
      .insert([{ id: signUpData.user.id, role }]);

    if (profileError) {
      Alert.alert('Error', profileError.message);
      setLoading(false);
      return;
    }

    Alert.alert('Success', \`Signed up as \${role}\`);
    router.push('/');
    setLoading(false);
  };

  return (
    <View className="flex-1 justify-center items-center p-4">
      <Text className="text-2xl font-bold mb-6">Welcome to ScriptHammer</Text>
      <TextInput
        className="border border-gray-300 rounded p-2 mb-4 w-full"
        placeholder="Email"
        autoCapitalize="none"
        onChangeText={setEmail}
        value={email}
      />
      <TextInput
        className="border border-gray-300 rounded p-2 mb-4 w-full"
        placeholder="Password"
        secureTextEntry
        onChangeText={setPassword}
        value={password}
      />
      <TouchableOpacity
        className="bg-blue-500 p-3 rounded w-full items-center"
        onPress={handleSignUp}
      >
        <Text className="text-white font-bold">
          {loading ? 'Signing Up...' : 'Sign Up'}
        </Text>
      </TouchableOpacity>
    </View>
  );
};

export default AuthScreen;
EOF

# 8. Create the home screen
cat > app/index.tsx << 'EOF'
import React from 'react';
import { View, Text, TouchableOpacity } from 'react-native';
import { useRouter } from 'expo-router';
import { useAuth } from './_layout';

const HomeScreen = () => {
  const router = useRouter();
  const { user, role } = useAuth();

  return (
    <View className="flex-1 justify-center items-center p-4">
      <Text className="text-xl mb-4">Hello, {user?.email || 'Guest'}!</Text>
      <Text className="mb-4">Your role is: {role || 'N/A'}</Text>
      {role === 'admin' && (
        <TouchableOpacity
          className="bg-green-500 p-3 rounded w-full items-center mb-2"
          onPress={() => router.push('/admin')}
        >
          <Text className="text-white font-bold">Go to Admin Dashboard</Text>
        </TouchableOpacity>
      )}
      <TouchableOpacity
        className="bg-blue-500 p-3 rounded w-full items-center"
        onPress={() => router.push('/auth')}
      >
        <Text className="text-white font-bold">Logout</Text>
      </TouchableOpacity>
    </View>
  );
};

export default HomeScreen;
EOF

# 9. Create the admin dashboard
cat > app/admin.tsx << 'EOF'
import React from 'react';
import { View, Text } from 'react-native';
import { useAuth } from './_layout';

const AdminDashboard = () => {
  const { user, role } = useAuth();

  if (role !== 'admin') {
    return (
      <View className="flex-1 justify-center items-center">
        <Text className="text-red-500">Access Denied: Admins only.</Text>
      </View>
    );
  }

  return (
    <View className="flex-1 p-4">
      <Text className="text-2xl font-bold mb-4">Admin Dashboard</Text>
      <Text>Welcome, {user?.email}</Text>
    </View>
  );
};

export default AdminDashboard;
EOF

echo "File structure has been set up successfully."
echo "Run the app with: npx expo start"
```

After pasting this block into your terminal, the file structure and all necessary code will be created. Finally, run:

```bash
npx expo start
```

This starts the Expo development server so you can test your app. Happy coding!
